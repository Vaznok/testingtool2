<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">

        <changeSet id="add_roles" author="Vitalii_Vlasenko">
        <insert tableName="roles">
            <column name="role" value="ADMIN"/>
        </insert>
        <insert tableName="roles">
            <column name="role" value="USER"/>
        </insert>
    </changeSet>

    <changeSet id="add_permissions" author="Vitalii_Vlasenko">
        <insert tableName="permissions">
            <column name="permission" value="CREATE TEST"/>
        </insert>
        <insert tableName="permissions">
            <column name="permission" value="TAKE A TEST"/>
        </insert>
    </changeSet>

    <changeSet id="add_permissions_roles" author="Vitalii_Vlasenko">
        <insert tableName="permissions_roles">
            <column name="permission_id" value="1"/>
            <column name="role_id" value="1"/>
        </insert>
        <insert tableName="permissions_roles">
            <column name="permission_id" value="2"/>
            <column name="role_id" value="2"/>
        </insert>
    </changeSet>

    <changeSet id="add_default_admin" author="Oleksandr_Erzhanov">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT count(*) FROM users WHERE email = "admin@admin.com";
            </sqlCheck>
        </preConditions>
        <comment>add default admin</comment>
        <insert tableName="users">
            <column name="email" value="admin@admin.com"/>
            <column name="password" value="1111"/>
            <column name="first_name" value="admin" />
            <column name="last_name"  value="admin" />
            <column name="city" value="dnipro" />
            <column name="birthday" value="2000-04-04" />
            <column name="mobile_phone" value="0943883833" />
            <column name="role_id" value="2" />
        </insert>
    </changeSet>

    <changeSet id="update_default_admin" author="Oleksandr_Erzhanov">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="1">
                SELECT count(*) FROM users WHERE email = "admin@admin.com";
            </sqlCheck>
        </preConditions>
        <comment>update default admin</comment>
        <update tableName="users">
            <column name="email" value="admin@admin.com"/>
            <column name="password" value="2222"/>
            <column name="first_name" value="admin" />
            <column name="last_name"  value="admin" />
            <column name="city" value="dnipro" />
            <column name="birthday" value="2000-04-04" />
            <column name="mobile_phone" value="0943883833" />
            <column name="role_id" value="2" />
        </update>
    </changeSet>

    <changeSet id="add_default_user" author="Oleksandr_Erzhanov">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT count(*) FROM users WHERE email = "user@user.com";
            </sqlCheck>
        </preConditions>
        <comment>add default user</comment>
        <insert tableName="users">
            <column name="email" value="user@user.com"/>
            <column name="password" value="22222"/>
            <column name="first_name" value="user" />
            <column name="last_name"  value="user" />
            <column name="city" value="dnipro" />
            <column name="birthday" value="2000-04-04" />
            <column name="mobile_phone" value="0943883833" />
            <column name="role_id" value="1" />
        </insert>
    </changeSet>

    <changeSet id="update_default_user" author="Oleksandr_Erzhanov">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT count(*) FROM users WHERE email = "user@user.com";
            </sqlCheck>
        </preConditions>
        <comment>update default user</comment>
        <update tableName="users">
            <column name="email" value="user@user.com"/>
            <column name="password" value="22222"/>
            <column name="first_name" value="user" />
            <column name="last_name"  value="user" />
            <column name="city" value="dnipro" />
            <column name="birthday" value="2000-04-04" />
            <column name="mobile_phone" value="0943883833" />
            <column name="role_id" value="1" />
        </update>
    </changeSet>

</databaseChangeLog>
